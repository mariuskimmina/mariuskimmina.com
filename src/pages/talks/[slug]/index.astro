---
import { type CollectionEntry, getCollection } from "astro:content";
import PostDetails from "@layouts/PostDetails.astro";

export interface Props {
  talk: CollectionEntry<"talks">;
}

export async function getStaticPaths() {
  const talks = await getCollection("talks");

  return talks.map(talk => ({
    params: { slug: talk.slug },
    props: { talk },
  }));
}

const { talk } = Astro.props;
const talks = await getCollection("talks");
---

<PostDetails post={talk} allPosts={talks} />
